<script src="alasqlparser.js"></script>
<script src="alaparser2.js"></script>
<script src="alasql2.js"></script>


<script>

	var mydata = [
		{studentid:58,studentname:'Sarah Patrik',course:1, startdate: new Date(2014,0,10), amt:100},
		{studentid:102,studentname:'John Stewart', course:2, startdate: new Date(2014,0,20), amt:20},
		{studentid:104,studentname:'Anna Wooden', course:2, startdate: new Date(2014,0,15), amt:5},
	];

	for(var i=0; i<1000; i++) {
		mydata.push({
			course:(Math.random()*100)|0,
			startdate: new Date(
				((Math.random()*10)|0)+2010, 
				((Math.random()*12)|0), 
				((Math.random()*30)|0)+1
			),
			amt:((Math.random()*1000)|0)
		});
	}

	alasql.tables.students = {
		data:mydata,
		columns:[
			{columnid: 'studentid', dbtypeid:'INT'}, 
			{columnid: 'studentname', dbtypeid: 'STRING'}, 
			{columnid: 'course'},
			{columnid: 'startdate', dbtypeid: 'DATE'},
			{columnid: 'amt', dbtypeid: 'MONEY'}
		]
	};

	alasql.tables.students.xcolumns = {};
	alasql.tables.students.columns.forEach(function(col){
		alasql.tables.students.xcolumns[col.columnid] = col;
	});




	
//    console.table(alasql.exec('SELECT * FROM students WHERE course>100'));
//    console.table(
//    	alasql.exec('SELECT * FROM students WHERE course = 2 ORDER BY startdate DESC' )
//    	alasql.exec('SELECT studentid, studentname FROM students WHERE course = 2' )
//    	var res = alasql.exec('SELECT course, SUM(amt), COUNT(*), MAX(amt) FROM students GROUP BY course' );
    	var res = alasql.exec('SELECT * FROM students' );
//    	var res = alasql.exec('SELECT studentid, studentname, course+1 as cr FROM students WHERE cr = 3' );
//    );
//    var tm3 = Date.now();
//    var newarr = mydata.slice(0);
//    mydata.filter(function(r){return r.course == 2});
//    console.log(Date.now()-tm3);
    console.log(res.length);
    // alasql.exec('SELECT * FROM students ttt');
    // alasql.exec('SELECT students.* FROM students');
    // alasql.exec('SELECT studentid FROM students');
    // alasql.exec('SELECT students.studentid FROM students');
    // alasql.exec('SELECT ttt.studentid FROM students ttt');
    // alasql.exec('SELECT ttt.* FROM students ttt');

</script>