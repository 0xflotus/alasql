<script src="alasqlparser.js"></script>
<script src="alaparser2.js"></script>
<script src="alasql2.js"></script>


<script>

	var studentsData = [
		{studentid:58,studentname:'Sarah Patrik',course:1, startdate: new Date(2014,0,10), amt:10},
		{studentid:102,studentname:'John Stewart', course:2, startdate: new Date(2014,0,20), amt:20},
		{studentid:104,studentname:'Anna Wooden', course:2, startdate: new Date(2014,0,15), amt:30},
	];

	var coursesData = [
		{courseid:1, coursename: 'first'},
		{courseid:2, coursename: 'second'},
		{courseid:3, coursename: 'third'}
	];



	// for(var i=0; i<1000; i++) {
	// 	mydata.push({
	// 		course:(Math.random()*100)|0,
	// 		startdate: new Date(
	// 			((Math.random()*10)|0)+2010, 
	// 			((Math.random()*12)|0), 
	// 			((Math.random()*30)|0)+1
	// 		),
	// 		amt:((Math.random()*1000)|0)
	// 	});
	// }

	alasql.tables.students = {
		data:studentsData,
		columns:[
			{columnid: 'studentid', dbtypeid:'INT'}, 
			{columnid: 'studentname', dbtypeid: 'STRING'}, 
			{columnid: 'course'},
			{columnid: 'startdate', dbtypeid: 'DATE'},
			{columnid: 'amt', dbtypeid: 'MONEY'}
		]
	};

	alasql.tables.students.xcolumns = {};
	alasql.tables.students.columns.forEach(function(col){
		alasql.tables.students.xcolumns[col.columnid] = col;
	});

	alasql.tables.courses = {
		data: coursesData,
		columns: [
			{columnid: 'courseid', dbtypeid:'INT'}, 
			{columnid: 'coursename', dbtypeid: 'STRING'}, 
		]
	}
	alasql.tables.courses.xcolumns = {};
	alasql.tables.courses.columns.forEach(function(col){
		alasql.tables.courses.xcolumns[col.columnid] = col;
	});

 	var res = alasql.exec('SELECT COUNT(*) FROM students JOIN courses USING courseid' );
    console.log(res.length);
    console.log(res[0]);

</script>